var e=new class{get fileHandler(){return this._inputElement}get isAvailable(){var e,t;return null===(t=null===(e=this._inputElement.files)||void 0===e?void 0:e.item(0))||void 0===t?void 0:t.type.startsWith("image")}get image(){return this._imageFile}get imageURL(){return URL.createObjectURL(this._imageFile)}select(){this._inputElement.click()}get(){var e;this._imageFile=null===(e=this._inputElement.files)||void 0===e?void 0:e.item(0)}constructor(){this._inputElement=document.getElementById("file"),this._imageFile=new File([],"")}};class t{get con(){return t._connection}upload(e){const n=new FormData;n.append("UPLOADCARE_PUB_KEY",this._key),n.append("UPLOADCARE_STORE","auto"),n.append(e.name,e),t._connection.send(n)}constructor(){this._key="dd47275adc50224d0f24",this._host="https://upload.uploadcare.com/base/",t._connection=new XMLHttpRequest,t._connection.open("POST",this._host),t._connection.responseType="json"}}var n=new t;const o=document.getElementById("preview"),i=document.getElementById("uploadPrompt"),d=document.getElementById("iBox"),s=document.getElementById("iBoxPrompt"),a=document.getElementById("uploadingBox"),l=document.getElementById("outputBox"),c=document.getElementById("outputBoxPrompt"),r=document.getElementById("copy"),m=()=>e.select();document.body.addEventListener("click",m),e.fileHandler.addEventListener("change",(()=>{e.isAvailable?(document.body.removeEventListener("click",m),e.get(),o.src=e.imageURL,o.classList.remove("no-pop"),i.classList.add("hidden"),d.classList.remove("hidden")):console.log("Wrong file selected")})),d.addEventListener("click",(()=>{n.upload(e.image)})),n.con.addEventListener("loadstart",(()=>{s.textContent="Uploading..."})),n.con.upload.addEventListener("progress",(e=>{console.log(e);const t=Math.round(e.loaded/e.total*100);a.setAttribute("style",`--u: ${t}%`)})),n.con.addEventListener("load",(()=>{a.dataset.prompt="Optimizing...",console.log(n.con.response[e.image.name]),c.textContent=`https://ucarecdn.com/${n.con.response[e.image.name]}/`,l.classList.remove("hidden"),a.classList.add("exit")})),r.addEventListener("click",(()=>{navigator.clipboard.writeText(c.textContent)}));